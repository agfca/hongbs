$('#userJson').bootstrapTable({    url: '/order/?orderStatu=4',    method : "GET",    search:true,//搜索框    uniqueId:'id',//主键列    pagination:true,//启用分页    paginationLoop:false,//页码循环    sidePagination:'client',//客户端分页    pageSize:10,    pageList:[5,10,15,20],    //sortName:'id',//自定义排序列    //sortOrder:'desc',//倒序    showColumns:true,//选择显示columns    //detailView:true,//详细页面模式    toolbar:'#toolbar',//指定工具栏    undefinedText:'-',//undefined时显示字符    smartDisplay:true,//智能切换视图    maintainSelected:true,//切换页面记录选中的按钮    //singleSelect:true,//禁止多选    clickToSelect:true,//点击行时选中    //cardView:true,//手机端视图    //showPaginationSwitch:true,    //showHeader:true,//显示表头    //showFooter:true,//显示表尾    selectItemName:'btSelectItem',//	radio or checkbox 的字段名    detailView:true,//显示子父表    //处理数据返回    responseHandler: function(result) {        return result;    },    columns: [{        field: 'orderName',        title: '订单名称',    }, {        field: 'oddNum',        title: '单号'    }, {        field: 'partyA',        title: '甲方'    }, {        field: 'userName',        title: '销售'    }, {        field: 'fileName',        title: '下单人'    }, {        field: 'orderTime',        title: '下单时间'    }, {        field: 'orderStatu',        title: '订单状态',        formatter: function (value, row, index) {        	var htmlStr;        	if(value=="4")        		htmlStr="制版";             return htmlStr;        }    }, {        field: 'deliveryTime',        title: '交货时间'    }, {        field: 'remark',        title: '备注'    }, {        field: 'id',        title: '操作',        formatter:function (value, row, index){            return getButton(row);        }    }],    //注册加载子表的事件。注意下这里的三个参数！    onExpandRow: function (index, row, $detail) {        childTable(index, row, $detail);    },});//订单配置表  子表var childTable = function (index, row, $detail) {    var orderId = row.id;    cur_table = $detail.html('<table></table>').find('table');    $(cur_table).bootstrapTable({        url: 'order/infos/'+orderId,        method: 'get',        //处理数据返回        responseHandler: function(result) {            return result;        },        columns: [{            field: 'orderid',            title: "序号",            formatter: function (value, row, index) {                return index+1;            }        }, {            field: 'infoName',            title: '配置名称',        }, {            field: 'fabric',            title: '面料',            formatter: function (value, row, index) {                var tempHtml = "";                var fabricArr = eval(value);                if(fabricArr!=null&&fabricArr.length>0){                    for(var i = 0; i<fabricArr.length; i++){                        tempHtml += fabricArr[i].name +":"+ fabricArr[i].color+"，&nbsp;";                    }                }                return tempHtml;            }        }, {            field: 'style',            title: '款式'        }, {            field: 'gongyi',            title: '工艺'        }, {            field: 'giveKH',            title: '客户有无样衣'        }, {            field: 'containFabric',            title: '含量'        }, {            field: 'logoStation',            title: '校徽位置'        }, {            field: 'total',            title: '总数'        }, {            field: 'id',            title: '操作',            formatter:function (value, row, index) {                var strTemp = "<button type='button' class='btn btn-info btn-sm' onclick='findOrderInfo("+value+")'>"                    +"查看详情</button>";                return strTemp;            }        }],    });};/*查看详情*/function findOrderInfo(infoId){    window.open('/orderDetail/info/'+infoId);}/*弹出上传制版div*/function openAddOrderDiv(orderName,partyA,deliveryTime,remark,id) {    $("#orderName1").val(orderName);    $("#orderId").val(id);    $("#addOrderDiv").modal("show");}/*添加制版文件*/function addZhibanFile(){    var orderId = $("#orderId").val();    var formdata=new FormData( );    var file = $("#orderFile")[0].files[0];    if(!file){        layer.msg("请选择制版文件");        return;    }    formdata.append("zhibanFile" , $("#orderFile")[0].files[0]);//获取制版文件    $.ajax({        url : "/order/addZhibanFile/"+orderId,        type : "POST",        data : formdata,        async: false,        cache: false,        processData: false,  // 告诉jQuery不要去处理发送的数据        contentType: false,  // 告诉jQuery不要去设置Content-Type请求头        success : function(data) {            $("#addOrderDiv").modal("hide");            layer.msg(data);            $("#userJson").bootstrapTable("refresh");        },        error : function(data) {            alert(data.status);            //$( '#serverResponse').html(data.status + " : " + data.statusText + " : " + data.responseText);        }    });}/*获取按钮*/function getButton(row) {    var htmlStr="";    if(row.mainFabricFile!=null &&row.mainFabricFile!=""){        htmlStr = "<button type='button' class='btn-sm' onclick=\"getFile("+row.id+",'"+row.mainFabricFile+"')\">下载制版文件</button>";    }    htmlStr += "&nbsp;<button type='button' class='btn-sm' onclick=\"openAddOrderDiv('"        +row.orderName+"','"+row.partyA+"','"+row.deliveryTime+"','"+row.remark+"','"+row.id+"')\">上传制版文件</button>"        + "&nbsp;<button type='button' class='btn-sm' onclick='disp_confirm("+row.id+","+row.orderStatu+")'>确认</button>&nbsp;";    return htmlStr;//获取按钮    /* htmlStr += "&nbsp;<input type='button' value='修改' onclick=\"change('"+value+"','"+row.orderName+"','"+row.oddNum+"','"+row.modelFile+"','"+row.file2Name+"')\"/>"         + "&nbsp;<input type='button' value='确认' onclick='disp_confirm("+value+","+row.orderStatu+")'/>&nbsp;";     return htmlStr;//获取按钮*/}/*获取制版文件*/function getFile(orderId,filePath) {    window.open("/word/"+orderId+"/"+filePath);}/*确认制版  提交订单  */function disp_confirm(orderId,orderStatu){    var r=confirm("如有制版图，请先上传再提交...")    if (r==true) {        putOrder(orderId,orderStatu);    }    else {    }}/*提交订单 修改订单状态为5*/function putOrder(orderId,orderStatu){    var orderStatu = parseInt(orderStatu)+1;    layer.msg('确认提交订单？', {        time: 0 //不自动关闭        ,shade:0.01        ,btn: ['确认', '取消']        ,yes: function(index){            layer.close(index);            $.ajax({                url : "/order/"+orderId+"",                type : "PUT",                data : {orderStatu:orderStatu},                beforeSend:function(){                    index = layer.msg('提交中...', {icon: 16,time: 20000,shade:0.01});                },                success : function(data) {                    layer.close(index);                    layer.msg(data);                    $("#userJson").bootstrapTable("refresh");                },                error : function(data) {                    alert(data.status);                    //$( '#serverResponse').html(data.status + " : " + data.statusText + " : " + data.responseText);                }            });        }    });}//TODO  没用  下载文件function downloadFile(url) {	var filePath = url.split("___");    //alert(filePath.length)    for(var i=0;i<filePath.length;i++){    	alert(filePath[i])	    try{ 	        var elemIF = document.createElement("iframe");   	        elemIF.src = filePath[i];   	        elemIF.style.display = "none";   	        document.body.appendChild(elemIF);   	    }catch(e){ 	    }    }}//TODO  没用  form 上传制版文件function change(id,orderName,oddNum,modelFile,file2Name){    $("#id").val(id);    $("#orderName").val(orderName);}//TODO  没用  form 上传制版文件function changerOrder(){	var id =  $("#id").val();	if(id==""||id==undefined){		alert("请选择需要上传制版文件的订单");		return;	}    $('#ff').attr('action','/order?method=findOrderFileZB');        $('#ff').submit( );}//TODO  没用  提交制版文件  并修改制版状态function putOrderFile(id){    var formdata=new FormData( );    formdata.append("orderStatu" , "5");//制版    formdata.append("id" , id);    formdata.append("file" , $("#file"+id)[0].files[0]);//获取文件    $.ajax({        url : "/order/"+id+"/file/",        type : "POST",        data : formdata,        async: false,        cache: false,        processData: false,  // 告诉jQuery不要去处理发送的数据        contentType: false,  // 告诉jQuery不要去设置Content-Type请求头        success : function(data) {            alert(data);            $("#userJson").bootstrapTable("refresh");        },        error : function(data) {            alert(data.status);            //$( '#serverResponse').html(data.status + " : " + data.statusText + " : " + data.responseText);        }    });}